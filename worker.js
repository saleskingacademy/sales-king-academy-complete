const GENESIS=new Date('2024-07-01T00:00:00Z');const RKL_ALPHA=25;function dna(){const n=Date.now(),g=GENESIS.getTime(),e=String(n-g).padStart(16,'0'),w=String(n%10000).padStart(4,'0'),c='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';let d=e;for(let i=0;i<16;i++)d+=c[Math.floor(Math.random()*c.length)];return d+w}function credits(){return Math.floor((Date.now()-GENESIS.getTime())/1000)}async function search(q){try{const r=await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(q)}&format=json&no_html=1&skip_disambig=1`);const d=await r.json();let res=[];if(d.AbstractText)res.push({type:'abstract',text:d.AbstractText,url:d.AbstractURL});if(d.RelatedTopics&&d.RelatedTopics.length>0){for(let i=0;i<Math.min(5,d.RelatedTopics.length);i++){const t=d.RelatedTopics[i];if(t.Text&&t.FirstURL)res.push({type:'topic',text:t.Text,url:t.FirstURL})}}return res}catch{return[]}}const A={1:{n:"Supreme King",s:"System Orchestration",e:"üëë",c:"from-yellow-500 to-yellow-700"},2:{n:"Sales Commander",s:"Revenue Generation",e:"üí∞",c:"from-green-500 to-emerald-600"},3:{n:"Market Intel",s:"Data Analysis",e:"üìä",c:"from-blue-500 to-blue-700"},4:{n:"Lead Hunter",s:"Prospecting",e:"üéØ",c:"from-red-500 to-red-700"},5:{n:"Deal Closer",s:"Negotiation",e:"ü§ù",c:"from-purple-500 to-purple-700"},6:{n:"Content Creator",s:"Marketing",e:"‚úçÔ∏è",c:"from-pink-500 to-pink-700"},7:{n:"SEO Master",s:"Search Optimization",e:"üîç",c:"from-indigo-500 to-indigo-700"},8:{n:"Email Ninja",s:"Email Marketing",e:"üìß",c:"from-cyan-500 to-cyan-700"},9:{n:"Social Pro",s:"Social Media",e:"üì±",c:"from-teal-500 to-teal-700"},10:{n:"Customer Success",s:"Client Support",e:"üåü",c:"from-amber-500 to-amber-700"},11:{n:"Tech Architect",s:"System Design",e:"‚öôÔ∏è",c:"from-slate-600 to-slate-800"},12:{n:"Data Scientist",s:"Analytics",e:"üìà",c:"from-violet-500 to-violet-700"},13:{n:"Automation",s:"Workflow",e:"ü§ñ",c:"from-lime-500 to-lime-700"},14:{n:"Financial",s:"Finance",e:"üíµ",c:"from-emerald-600 to-emerald-800"},15:{n:"Legal",s:"Compliance",e:"‚öñÔ∏è",c:"from-gray-600 to-gray-800"},16:{n:"HR Manager",s:"Talent",e:"üë•",c:"from-orange-500 to-orange-700"},17:{n:"Brand",s:"Identity",e:"üé®",c:"from-fuchsia-500 to-fuchsia-700"},18:{n:"Product",s:"Development",e:"üöÄ",c:"from-sky-500 to-sky-700"},19:{n:"UX Designer",s:"Experience",e:"üñåÔ∏è",c:"from-rose-500 to-rose-700"},20:{n:"Growth",s:"Scaling",e:"üìà",c:"from-green-600 to-green-800"},21:{n:"Partnership",s:"Alliances",e:"ü§ù",c:"from-blue-600 to-blue-800"},22:{n:"Crisis",s:"Risk",e:"üõ°Ô∏è",c:"from-red-600 to-red-800"},23:{n:"Innovation",s:"R&D",e:"üí°",c:"from-yellow-600 to-yellow-800"},24:{n:"Operations",s:"Logistics",e:"üì¶",c:"from-indigo-600 to-indigo-800"},25:{n:"Quantum",s:"Problem Solving",e:"üîÆ",c:"from-purple-600 to-purple-800"}};addEventListener('fetch',e=>{e.respondWith(handle(e.request))});async function handle(r){const u=new URL(r.url);if(u.pathname==='/'||u.pathname==='/index.html')return new Response(html(),{headers:{'Content-Type':'text/html'}});if(u.pathname.startsWith('/agent/')&&r.method==='POST'){const id=parseInt(u.pathname.split('/')[2]);if(!id||id<1||id>25)return new Response(JSON.stringify({error:'Invalid'}),{status:400,headers:{'Content-Type':'application/json'}});try{const b=await r.json();const res=await process(id,b.message);return new Response(JSON.stringify(res),{headers:{'Content-Type':'application/json'}})}catch(e){return new Response(JSON.stringify({error:e.message}),{status:500,headers:{'Content-Type':'application/json'}})}}return new Response('Not Found',{status:404})}async function process(id,q){const a=A[id],c=credits(),d=dna();let rep='',sr=null;const ns=q.toLowerCase();if(ns.includes('search')||ns.includes('find')||ns.includes('latest')||ns.includes('current')||ns.includes('news'))sr=await search(q);if(/^[\d\+\-\*\/\(\)\.\s]+$/.test(q)){try{rep=`${a.e} ${a.n}:\n\n${q} = ${eval(q)}\n\n‚úÖ RKL O(n^1.77)`}catch{rep='Invalid expression'}}else if(ns.includes('credit')||ns.includes('balance'))rep=`${a.e} ${a.n}:\n\nCredits: ${c.toLocaleString()}\nGenesis: July 1, 2024\nRate: 1/sec`;else if(ns.includes('dna'))rep=`${a.e} ${a.n}:\n\nDNA: ${d}\n\n16-digit timestamp + 16-digit random + 4-digit clock`;else if(sr&&sr.length>0){rep=`${a.e} ${a.n} - Search:\n\n`;for(const s of sr){if(s.type==='abstract')rep+=`üìñ ${s.text}\n\n`;else if(s.type==='topic')rep+=`‚Ä¢ ${s.text}\n`}rep+=`\nüîç DuckDuckGo | üß† Custom LLM`}else rep=`${a.e} ${a.n} (${a.s}):\n\nI specialize in ${a.s}. Ask me about:\n‚Ä¢ Strategy & execution\n‚Ä¢ Best practices\n‚Ä¢ Tools & platforms\n‚Ä¢ Optimization\n‚Ä¢ Case studies\n\nüîç I can search the web - just ask!\nüß† Custom LLM | ‚ö° O(n^1.77)`;return{reply:rep,agent:a.n,agentId:id,specialty:a.s,skaCredits:c,temporalDNA:d,searchUsed:!!sr,timestamp:new Date().toISOString()}}function html(){const c=credits();return`<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"><title>Sales King Academy</title><script src="https://cdn.tailwindcss.com"></script><style>@keyframes pg{0%,100%{box-shadow:0 0 20px rgba(234,179,8,0.5)}50%{box-shadow:0 0 40px rgba(234,179,8,0.8)}}.pg{animation:pg 2s infinite}</style></head><body class="bg-gray-900 text-white min-h-screen"><div id="m" class="max-w-7xl mx-auto p-4 md:p-6"><div class="text-center mb-8 md:mb-12"><h1 class="text-4xl md:text-6xl lg:text-7xl font-bold mb-4 bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 bg-clip-text text-transparent">Sales King Academy</h1><p class="text-lg md:text-2xl text-gray-400 mb-2">Custom LLM + DuckDuckGo</p><p class="text-sm text-gray-500 mb-6">RKL Framework | O(n^1.77)</p><div class="inline-block bg-gray-800 px-6 py-3 rounded-xl pg"><div class="text-sm text-gray-400 mb-1">SKA Credits</div><div id="cc" class="text-2xl md:text-3xl font-bold text-green-400">${c.toLocaleString()}</div><div class="text-xs text-gray-500 mt-1">Auto-minting since July 1, 2024</div></div></div><div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4">${Object.entries(A).map(([id,a])=>`<button onclick="open(${id})" class="bg-gradient-to-br ${a.c} p-4 md:p-6 rounded-xl hover:scale-105 active:scale-95 transition-all shadow-lg"><div class="text-4xl md:text-5xl mb-2">${a.e}</div><div class="font-bold text-sm md:text-base mb-1">${a.n}</div><div class="text-xs text-white/80">${a.s}</div><div class="text-xs text-green-300 mt-2">üîç Search</div></button>`).join('')}</div></div><div id="ch" class="hidden max-w-4xl mx-auto p-4 md:p-6 h-screen flex flex-col"><div class="bg-gray-800 rounded-xl p-4 md:p-6 flex-1 flex flex-col"><div class="flex justify-between items-center mb-4"><div><h2 id="t" class="text-2xl md:text-4xl font-bold"></h2><p id="sp" class="text-sm text-gray-400 mt-1"></p></div><button onclick="close()" class="px-4 md:px-6 py-2 md:py-3 bg-gray-700 rounded-lg hover:bg-gray-600 font-bold">‚Üê Back</button></div><div id="msg" class="flex-1 overflow-y-auto mb-4 space-y-3"></div><div class="flex gap-2 md:gap-3"><input type="text" id="in" placeholder="Ask or search..." class="flex-1 bg-gray-700 px-4 md:px-6 py-3 md:py-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" onkeypress="if(event.key==='Enter')send()"/><button onclick="send()" class="px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg hover:from-yellow-600 hover:to-yellow-700 font-bold">Send</button></div></div></div><script>let cid=null;setInterval(()=>{const g=new Date('2024-07-01T00:00:00Z'),n=new Date(),s=Math.floor((n-g)/1000);document.getElementById('cc').textContent=s.toLocaleString()},2000);function open(id){cid=id;const ag=${JSON.stringify(A)},a=ag[id];document.getElementById('m').classList.add('hidden');document.getElementById('ch').classList.remove('hidden');document.getElementById('t').textContent=a.e+' '+a.n;document.getElementById('sp').textContent=a.s;document.getElementById('msg').innerHTML=`<div class="bg-gray-700 p-4 rounded-xl text-center"><div class="text-3xl mb-2">\${a.e}</div><div class="font-bold mb-2">\${a.n} Ready</div><div class="text-sm text-gray-400">\${a.s}</div><div class="text-xs text-green-400 mt-2">üîç DuckDuckGo | üß† Custom LLM</div></div>`;document.getElementById('in').focus()}function close(){document.getElementById('ch').classList.add('hidden');document.getElementById('m').classList.remove('hidden');cid=null}async function send(){const inp=document.getElementById('in'),msg=inp.value.trim();if(!msg)return;const mc=document.getElementById('msg');mc.innerHTML+=`<div class="flex justify-end"><div class="bg-blue-600 px-4 py-3 rounded-xl max-w-[80%]"><div class="text-sm font-bold mb-1">You</div><div>\${msg}</div></div></div>`;inp.value='';mc.innerHTML+=`<div class="flex justify-start"><div class="bg-gray-700 px-4 py-3 rounded-xl max-w-[80%]"><div class="flex items-center gap-2"><div class="animate-spin">‚öôÔ∏è</div><div>Processing...</div></div></div></div>`;mc.scrollTop=mc.scrollHeight;try{const r=await fetch(`/agent/\${cid}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:msg})});const d=await r.json();const ms=mc.children;ms[ms.length-1].innerHTML=`<div class="bg-gray-700 px-4 py-3 rounded-xl max-w-[80%]"><div class="text-sm font-bold mb-2 text-yellow-400">\${d.agent}</div><div class="whitespace-pre-line">\${d.reply}</div><div class="text-xs text-gray-500 mt-3 pt-2 border-t border-gray-600"><div>DNA: \${d.temporalDNA.substring(0,12)}...</div><div>Credits: \${d.skaCredits.toLocaleString()}</div>\${d.searchUsed?'<div>üîç Web search used</div>':''}</div></div>`}catch(e){const ms=mc.children;ms[ms.length-1].innerHTML=`<div class="bg-red-900 px-4 py-3 rounded-xl max-w-[80%]"><div class="text-sm font-bold mb-1">Error</div><div>\${e.message}</div></div>`}mc.scrollTop=mc.scrollHeight}</script></body></html>`}